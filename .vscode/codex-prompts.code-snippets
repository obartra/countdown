{
  "Codex: START HERE â€” Repo Map (Read-only, Evidence-based)": {
    "prefix": "codex-start",
    "body": [
      "READ-ONLY MODE. Do NOT edit files. Do NOT run destructive commands.",
      "",
      "You are onboarding to this repo. Produce an evidence-based repo map.",
      "",
      "Output:",
      "1) What the project is (1 paragraph)",
      "2) Directory map (top-level folders and their purpose)",
      "3) Entry points (Vite: index.html, src/main.tsx, src/App.tsx, routes if any)",
      "4) Build/test/lint/typecheck pipeline (from package.json + config files)",
      "5) Asset strategy (public/ vs src/assets/, how assets resolve in build output)",
      "6) Deployment notes (GitHub Pages? base path? build output dir?)",
      "7) Unknowns / missing info (explicit list)",
      "",
      "Rules:",
      "- Every claim must cite a file path (no guessing).",
      "- If you cannot find the evidence, mark it UNKNOWN and list what you searched.",
    ],
    "description": "Repo mapping for Vite/React/TS with strict evidence + unknowns",
  },

  "Codex: Asset + Path Audit (Read-only, Vite/GH Pages aware)": {
    "prefix": "codex-assets-audit",
    "body": [
      "READ-ONLY MODE. Do NOT edit files.",
      "",
      "Audit assets and paths with Vite in mind.",
      "",
      "Tasks:",
      "1) Identify every user-facing HTML entrypoint (Vite index.html, generated docs pages, etc).",
      "2) For each entrypoint, list referenced assets: CSS/JS/images/icons/manifest/fonts/CDN.",
      "3) Map local assets to repo locations (public/ vs src/assets vs elsewhere).",
      "4) Validate whether paths will work under:",
      "   - local dev server",
      "   - production build output",
      "   - GitHub Pages subpath (if relevant).",
      "",
      "Output format (table):",
      "Entrypoint | Reference | Local/Remote | Repo path | Path risk | Notes",
      "",
      "Rules:",
      "- Cite file paths for all findings.",
      "- If GH Pages is likely, explicitly call out base-path risk and where to fix.",
    ],
    "description": "Asset inventory + relative path risk detection for Vite/GH Pages",
  },

  "Codex: Docs Drift Report (Read-only) â€” README/docs vs Repo": {
    "prefix": "codex-docs-drift",
    "body": [
      "READ-ONLY MODE. Do NOT edit files.",
      "",
      "Compare README and docs against repo reality (code/config/scripts).",
      "",
      "Focus:",
      "- how to run dev/build/preview/test/lint/typecheck",
      "- output directories and generated artifacts",
      "- env vars / config / params",
      "- deployment / GitHub Pages expectations",
      "",
      "Output a table:",
      "Doc | Claim | Evidence (file path) | Correction | Confidence",
      "",
      "Rules:",
      "- No guessing; if unknown, mark UNKNOWN and suggest what to verify.",
      "- Prefer citing package.json scripts and config files.",
    ],
    "description": "Evidence-based drift detection (great before updating README)",
  },

  "Codex: Create/Update docs/plan.md (Docs Only) â€” Execution Plan": {
    "prefix": "codex-plan-doc",
    "body": [
      "DOCS-ONLY MODE. You may edit docs only (no production code changes).",
      "",
      "Create or update `docs/plan.md` as the canonical execution plan.",
      "",
      "Include sections:",
      "## Current State (evidence-based)",
      "## Goals",
      "## Non-goals",
      "## Constraints (tech + deploy + compatibility)",
      "## Work Breakdown (PR-sized slices)",
      "## Verification Commands (per slice)",
      "## Open Questions",
      "",
      "Rules:",
      "- Keep it actionable, not long.",
      "- Any claim not supported by repo evidence should be labeled ASSUMPTION or UNKNOWN.",
      "- Do not edit production code.",
    ],
    "description": "Create a short, durable execution plan document",
  },

  "Codex: Design Doc (Docs Only) â€” Feature Contract": {
    "prefix": "codex-design",
    "body": [
      "DOCS-ONLY MODE. Do NOT edit production code yet.",
      "",
      "Draft `docs/design/${1:feature-slug}.md` as the contract for this feature.",
      "",
      "Required sections:",
      "## Summary",
      "## Goals",
      "## Non-goals",
      "## UX / Behavior (user-visible)",
      "## API / Params / Config (if any)",
      "## State Model (server state vs UI state)",
      "## Data Model (if any)",
      "## Invariants",
      "## Edge Cases & Failure Modes",
      "## Accessibility Notes",
      "## Observability (logs/errors/metrics if relevant)",
      "## Rollout / Backward Compatibility",
      "## Test Plan",
      "## PR Breakdown (high-level)",
      "",
      "Rules:",
      "- Ground in existing repo behavior where possible; otherwise mark assumptions.",
      "- If decisions are missing, list explicit questions (do not guess).",
      "- No code edits.",
    ],
    "description": "Feature contract doc template for React/TS/Vite work",
  },

  "Codex: Slice Design into PRs (Read-only or Docs-only)": {
    "prefix": "codex-slice",
    "body": [
      "READ-ONLY mode preferred (or docs-only). Do NOT edit production code.",
      "",
      "Read `docs/design/${1:feature-slug}.md` and produce a PR plan (3â€“8 PRs).",
      "",
      "For each PR include:",
      "- Title",
      "- Goal (1â€“2 sentences)",
      "- Scope (what changes / what does not)",
      "- Files likely touched",
      "- Acceptance Criteria (testable)",
      "- Verification Commands",
      "- Risks / Unknowns",
      "",
      "Rules:",
      "- PRs must be independently mergeable and reviewable.",
      "- Keep PRs small; avoid mixing refactors with feature changes.",
      "- If a PR would touch many files, split it.",
    ],
    "description": "Turn design doc into reviewable PR slices with verification",
  },

  "Codex: PR Brief (Docs Only) â€” One PR = One Contract": {
    "prefix": "codex-pr-brief",
    "body": [
      "DOCS-ONLY MODE. Do NOT edit production code yet.",
      "",
      "Create `docs/pr/${1:pr-slug}.md` as the contract for a single PR.",
      "",
      "Include:",
      "## Summary",
      "## Goals",
      "## Non-goals",
      "## User-visible behavior (exact)",
      "## UI states (loading/error/empty/success if relevant)",
      "## Detailed Checklist",
      "## Files expected to change",
      "## Acceptance Criteria",
      "## Verification Commands",
      "## Test Plan",
      "## Rollback / Feature flag (if relevant)",
      "## Open Questions",
      "",
      "Rules:",
      "- This PR brief must correspond to exactly one PR slice.",
      "- Keep it concrete and testable.",
      "- No code edits in this step.",
    ],
    "description": "Create docs/pr/<slug>.md before implementing code",
  },

  "Codex: Implement PR from docs/pr (Small Diff + Tests + Verify)": {
    "prefix": "codex-implement",
    "body": [
      "BUILD MODE: Implement EXACTLY what is described in `docs/pr/${1:pr-slug}.md`.",
      "",
      "Constraints:",
      "- Smallest possible diff; no drive-by refactors.",
      "- If doc is underspecified, STOP and ask questions (do not guess).",
      "- Keep changes localized; prefer adding new files over rewriting unrelated code.",
      "",
      "Process:",
      "1) Restate intended behavior and list files you will touch.",
      "2) Implement.",
      "3) Add/update tests as described.",
      "4) Run verification commands and report results.",
      "5) Summarize diff + deferred follow-ups.",
    ],
    "description": "Implement a single PR brief faithfully, with verification",
  },

  "Codex: Frontend Verification Commands (Standard for Vite/TS)": {
    "prefix": "codex-verify",
    "body": [
      "Use these verification commands (use pnpm):",
      "",
      "- Install: `pnpm i --frozen-lockfile`",
      "- Dev: `npm run dev`",
      "- Build: `npm run build`",
      "- Preview: `npm run preview`",
      "- Test: `npm run test`",
      "- Lint: `npm run lint`",
      "- Format: `npm run format`",
      "- Typecheck: `npm run typecheck`",
      "",
      "If scripts are missing, propose adding them (docs-only first), then implement if approved.",
    ],
    "description": "Standard verification commands to reference in every PR brief",
  },

  "Codex: GitHub Pages Base Path + Routing Audit (Read-only)": {
    "prefix": "codex-ghpages",
    "body": [
      "READ-ONLY MODE. Do NOT edit files.",
      "",
      "This repo is deployed to GitHub Pages",
      "If yes, validate:",
      "- vite.config.ts `base`",
      "- routing strategy (BrowserRouter vs HashRouter or basename)",
      "- asset paths from public/ and imports",
      "- build output folder and any deploy workflow/scripts",
      "",
      "Output concrete findings + recommended changes, citing file paths.",
      "If deployment is unknown, mark UNKNOWN and list what evidence would confirm it.",
    ],
    "description": "Catch the #1 Vite deployment issue: base path + routing + assets",
  },

  "Codex: Stop & Present Options (When Underspecified)": {
    "prefix": "codex-stop",
    "body": [
      "STOP implementing. Requirements are underspecified or ambiguous.",
      "",
      "Present 2â€“3 options with:",
      "- pros/cons",
      "- impact on architecture",
      "- test implications",
      "- backward compatibility / rollout",
      "",
      "Ask the minimum clarifying questions needed to choose.",
      "Do not proceed until a choice is made.",
    ],
    "description": "Forces pause/decision instead of guessing",
  },

  "Codex: Review Current Changes Like a Staff Level Engineer": {
    "prefix": "codex-review",
    "body": [
      "Review the current diff/changes for:",
      "- correctness",
      "- edge cases",
      "- maintainability",
      "- accessibility (if UI)",
      "- security (as relevant)",
      "- docs drift",
      "- tests quality/coverage",
      "",
      "Output format:",
      "ðŸ”´ must-fix",
      "ðŸŸ¡ should-fix",
      "ðŸŸ¢ nice-to-have",
      "",
      "Include file-path references when possible.",
    ],
    "description": "High-signal diff review checklist",
  },

  "Codex: Reconcile Docs vs Code (Close the Loop)": {
    "prefix": "codex-reconcile",
    "body": [
      "Compare implemented behavior to:",
      "- `docs/pr/${1:pr-slug}.md`",
      "- relevant `docs/design/*.md`",
      "- README sections impacted",
      "",
      "If there is drift, propose ONE of:",
      "A) code changes to match docs",
      "B) doc changes to match code",
      "",
      "Explain which is correct and why.",
      "Do not apply patches until I approve.",
    ],
    "description": "Explicitly resolve spec drift after implementation",
  },

  "Codex: README Update (Docs Only, Evidence-based)": {
    "prefix": "codex-readme",
    "body": [
      "DOCS-ONLY MODE. Update `README.md` to match repo reality.",
      "",
      "Include (if applicable):",
      "- What it is",
      "- Repo structure (short)",
      "- Requirements (Node version/tooling if discoverable)",
      "- Install / Dev / Build / Preview / Test / Lint / Typecheck commands",
      "- Asset workflow (public vs src/assets)",
      "- Deployment notes (GH Pages base path, if relevant)",
      "",
      "Rules:",
      "- Only include claims supported by evidence in the repo.",
      "- If unclear, add 'Needs confirmation' instead of guessing.",
      "- Keep it tight and practical.",
    ],
    "description": "Update README accurately (no invented instructions)",
  },

  "Codex: Add CI Guardrails for Docs-First Workflow (Minimal)": {
    "prefix": "codex-ci-guardrails",
    "body": [
      "BUILD MODE: Add minimal CI guardrails to support docs-first workflow.",
      "",
      "Goal (minimal and best-practice):",
      "- If PR changes `src/**` (or other production code), require a change under `docs/pr/**`.",
      "- Optionally: enforce typecheck/lint/test on CI.",
      "",
      "Process:",
      "1) Identify existing CI (GitHub Actions etc.).",
      "2) Propose the smallest implementation (script + workflow step).",
      "3) Implement with clear failure messages.",
      "4) Update docs/plan.md (workflow rules + commands).",
      "",
      "Avoid heavy tooling. Keep it readable.",
    ],
    "description": "Light enforcement: docs/pr required when src changes + CI checks",
  },
}
